<html>
<head>
    <style>
        body, body {
            padding: 0;
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<script>
const canvas = document.createElement('canvas')
const ctx = canvas.getContext('2d')
document.body.appendChild(canvas)

canvas.width = window.innerWidth
canvas.height = window.innerHeight

ctx.fillStyle = 'lightblue'
ctx.fillRect(0, 0, canvas.width, canvas.height)

const player = {
    x: 0,
    y: 0,
    size: 20,
    score: 0
}
let isMouseDown = false

const enemies = []
while (enemies.length < 10) {
    enemies.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        vx: Math.random() > 0.5 ? 1 : -1,
        vy: Math.random() > 0.5 ? 1 : -1,
        size: Math.random() * 20 + 10
    })
}
/**
enemies.length
enemies.push({
    x: 5, y: 6,
    vx: 1, vy: 1
})
Math.random() * canvas.width
enemies.splice(i, 1)
const enemy = enemies[i]
enemies.forEach(function (enemy) {

})

function collision (obj1, obj2) {
    ...
    return ...
}
(obj1, obj2) => { ... }
obj1 => { ... }
**/

function collision (obj1, obj2) {
    const sizeSum = (obj1.size/2 + obj2.size/2)
    return (Math.abs(obj1.x - obj2.x) < sizeSum) &&
           (Math.abs(obj1.y - obj2.y) < sizeSum)
}

const speed = 3
function render () {
    requestAnimationFrame(render)
    ctx.fillStyle = 'lightblue'
    ctx.fillRect(0, 0, canvas.width, canvas.height)

    // player logic
    if (keyboard.a) player.x -= speed
    if (keyboard.d) player.x += speed
    if (keyboard.w) player.y -= speed
    if (keyboard.s) player.y += speed

    // enemy logic
    let hasPlayerCollided = false
    enemies.forEach(enemy => {
        enemy.x += enemy.vx
        enemy.y += enemy.vy
        if (enemy.x < 0 || canvas.width < enemy.x) enemy.vx *= -1
        if (enemy.y < 0 || canvas.height < enemy.y) enemy.vy *= -1

        if (collision(enemy, player)) {
            hasPlayerCollided = true
        }
    })

    // enemy render
    enemies.forEach(enemy => {
        ctx.fillStyle = 'red'
        ctx.fillRect(
            enemy.x - enemy.size/2,
            enemy.y - enemy.size/2,
            enemy.size,
            enemy.size
        )
    })

    // player render
    ctx.fillStyle = hasPlayerCollided ? 'cyan' : 'blue'
    const size = 20
    ctx.fillRect(player.x - player.size/2,
        player.y - player.size/2,
        player.size,
        player.size)

    ctx.fillStyle = 'black'
    ctx.font = '30px Helvetica'
    ctx.fillText(`Score: ${player.score}`, 30, 40)
}
requestAnimationFrame(render)

const keyboard = {}
document.addEventListener('keydown', function (event) {
    keyboard[event.key] = true
})
document.addEventListener('keyup', function (event) {
    keyboard[event.key] = false
})

</script>
</body>
</html>